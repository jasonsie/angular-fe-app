<div class="editor-toolbar">
  <button type="button" (click)="addLink()" aria-label="Insert Link">
    ðŸ”— Link
  </button>
</div>

<button type="button" (click)="printHtml()" class="debug-button">
  Print HTML
</button>

<div
  #editor
  class="editor-area"
  contenteditable="true"
  spellcheck="true"
  (keydown)="onKeyDown($event)"
  [attr.aria-label]="'Rich Text Editor'"
  [innerHTML]="DefaultUL"
></div>

@if (showLinkActionsPopover() && hoveredLinkNode()) {
  <div
    class="link-actions-popover"
    [style.top.px]="linkActionsPosition()?.top ?? 0"
    [style.left.px]="linkActionsPosition()?.left ?? 0"
    (click)="$event.stopPropagation()"
  >
    <span class="popover-label">Go to link:</span>
    <a
      [href]="hoveredLinkNode()?.href"
      target="_blank"
      rel="noopener noreferrer"
      class="link-preview"
      (click)="onGoToLink()"
    >{{ hoveredLinkNode()?.href }}</a>

    <div class="actions">
      <button type="button" (click)="onEditLink()" class="action-change">Change</button>
      <button type="button" (click)="onRemoveLink()" class="action-remove">Remove</button>
    </div>
  </div>
}


@if (showLinkPopover()) {
  <div
    class="link-popover"
    [style.top.px]="linkPopoverPosition()?.top ?? 0"
    [style.left.px]="linkPopoverPosition()?.left ?? 0"
    (click)="$event.stopPropagation()"
  >
    <label for="link-input-box" class="popover-label">Insert link</label>
    <input
      id="link-input-box"
      type="url"
      placeholder="https://example.com"
      class="link-input"
      [value]="linkInputValue()"
      (input)="linkInputValue.set($any($event.target).value)"
      autocomplete="off"
    />
    <div class="popover-actions">
      <button type="button" (click)="applyLink()" class="btn-primary">Apply</button>
      <button type="button" (click)="closeLinkPopover()" class="btn-secondary">Cancel</button>
    </div>
  </div>
}

@if (htmlString()) {
  <div class="debug-output">
    <strong>HTML Output:</strong>
    <pre>{{ htmlString() }}</pre>
  </div>
}
